{% extends 'base.html' %}
{% load widget_tweaks %}

{% block title %}{{ user.username }} | Profile{% endblock %}

{% block content %}
    {% include 'accounts/navigation.html' with active_link='profile' %}
    <div class="card-panel">
        <div class="row">
            <div class="col m6 s12">
                {% include 'accounts/profile_form.html' %}
            </div>
            <div class="col m6 s12">
                <form action="{% url 'accounts:avatar_upload' %}" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    {% if user.profile %}
                        <img src="{{ user.profile.avatar_url }}"
                             alt="{{ user.profile.avatar_file_name }}"/>
                    {% endif %}
                    <div class="file-field input-field">
                        <div class="btn">
                            <span>Image</span>
                            <input type="file" id="id_avatar" name="avatar" accept=".png, .jpg, .jpeg, .gif" required/>
                        </div>
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text"/>
                        </div>
                        {{ user_profile_form.avatar.errors }}
                    </div>
                    <button class="btn">Upload</button>
                </form>
            </div>
        </div>
    </div>
{% endblock %}