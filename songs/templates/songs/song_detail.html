{% extends "base.html" %}
{% load gravatar %}
{% load comments %}

{% block title %}{{ song.title }}{% endblock %} }}

{% block content %}
    <ol class="breadcrumb">
        <li><a href="{% url 'songs:index' %}">Songs</a></li>
        <li class="active">{{ song.title }}</li>
    </ol>

    <div class="media">
        <div class="media-left">
            <a href="{% url 'users:detail' song.created_by %}">
                <img src="{% gravatar_url song.created_by.email 50 %}" title="{{ song.created_by.username }}"/>
            </a>
        </div>
        <div class="media-body">
            <h1 class="media-heading song__title">{{ song.title }}
                {% if request.user == song.created_by %}
                    <a href="{% url 'songs:edit' song.pk %}" class="btn btn-primary btn-xs">
                        <i class="glyphicon glyphicon-pencil"></i>&nbsp;Edit
                    </a>
                {% endif %}
            </h1>
            <p class="song__description">{{ song.description }}</p>
        </div>
    </div>
    {% include 'songs/media_player.html' %}
    <div class="comments">
        {% get_comment_count for song as song_comment_count %}
        <h3 class="comments__title">Comments ({{ song_comment_count }})</h3>
        {% render_comment_form for song %}
        {% render_comment_list for song %}
    </div>
{% endblock %}