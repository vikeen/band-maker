{% load widget_tweaks %}

{% if form.errors %}
    <div class="alert alert-danger">Please correct the errors below:</div>
{% endif %}

{% csrf_token %}
<div class="form-group row">
    <div class="col-sm-6">
        <label for="id_title">Title</label>
        {% render_field form.title class+="form-control" %}
        {% if form.title.errors %}
            <p class="errors">{{ form.title.errors.as_text }}</p>
        {% endif %}
    </div>
</div>

<div class="form-group row">
    <div class="col-sm-6">
        <label for="id_description">Description</label>
        {% render_field form.description class+="form-control" %}
        {% if form.description.errors %}
            <p class="errors">{{ form.description.errors.as_text }}</p>
        {% endif %}
    </div>
</div>
<div class="form-group row">
    <div class="col-sm-6">
        <label for="id_license">License</label>
        {% render_field form.license class+="form-control" %}
        <span class="help-block">
                    <a href="#" data-toggle="modal" data-target="#licenseModal">view license details</a>
                </span>
        {% if form.license.errors %}
            <p class="errors">{{ form.license.errors.as_text }}</p>
        {% endif %}
    </div>
    <div class="modal fade" id="licenseModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">{{ song.get_license_information.name }}</h4>
                    <a href="{{ song.get_license_information.link }}" target="_blank">canonical URL for the
                        license</a>
                </div>
                <pre>{{ song.get_license_information.text }}</pre>
            </div>
        </div>
    </div>
</div>
{% if form.published %}
    <div class="form-group">
        <label for="id_published">Published
            {% render_field form.published %}
        </label>
        <span class="help-block">Published songs can be viewed by any user</span>
        {% if form.published.errors %}
            <p class="errors">{{ form.published.errors.as_text }}</p>
        {% endif %}
    </div>
{% endif %}
<div class="form-group">
    <button class="btn btn-primary" type="submit">Save</button>
</div>