{% extends 'base.html' %}

{% load widget_tweaks %}

{% block title %}Edit - {{ song.title }}{% endblock %}

{% block content %}
    <ol class="breadcrumb">
        <li><a href="{% url 'users:songs' user.username %}">My Songs</a></li>
        <li class="active">{{ song.title }}</li>
    </ol>

    {% if form.errors %}
        <div class="alert alert-danger">Please correct the errors below:</div>
    {% endif %}

    <form action="" method="post">
        <legend>Edit Song</legend>
        {% csrf_token %}
        <div class="form-group">
            <label for="id_title">Title</label>
            {% render_field form.title class+="form-control" %}
            {% if form.title.errors %}
                <p class="errors">{{ form.title.errors.as_text }}</p>
            {% endif %}
        </div>
        <div class="form-group">
            <label>Tracks</label>
            <bm-media-player title="{{ song.title }}" tracks="{{ tracks }}"></bm-media-player>
        </div>
        <div class="form-group">
            <a href="{% url "users:track_create" user.username song.id %}" class="btn btn-warning">Add Track</a>
            <button class="btn btn-primary" type="submit">Save</button>
        </div>
        <hr/>
        <div class="form-group">
            <a class="btn btn-danger" href="{% url 'users:song_delete' user.username song.id %}">Delete</a>
        </div>
    </form>
{% endblock %}